{% extends "layout.njk" %}
{% from "task-list.njk" import task, taskListHeading, taskList, disabledTask %}
{% from "timeRemaining.njk" import timeRemaining %}
{% from "internalLink.njk" import internalLink %}
{% block additional_head %}
  <link rel="stylesheet" href="{{ asset_paths['style'] }}/govuk-frontend/task-list.css"/>
{% endblock %}

{% set heading = 'Respond to a money claim' %}
{% set headingSize = 'xlarge' %}
{% set taskNumber = 2 %}

{% block content %}

  <div class="grid-row">
    <div class="column-two-thirds">
      <h2 class="govuk-heading-s govuk-!-margin-bottom-2">
        {{ t("Application {{ status }}",{ status: 'complete' if (status.total === status.completed) else 'incomplete'} )}}
      </h2>
      <p class="govuk-body">
        {{ t('You have completed {{ status.completed }} of {{ status.total }} sections',{status: status}) }}
      </p>
      <p class="govuk-body govuk-!-margin-bottom-7">
        {{ t('After you have completed all the actions you will be taken to a page where you can check your answers before submitting.') }}
      </p>
      
      {{ taskList(beforeYouStartSection, 1) }}
      {{ taskList(respondToClaimSection, 2) }}

      {% if resolvingClaimSection %}
        {% set taskNumber = taskNumber + 1 %}
        {{ taskList(resolvingClaimSection, taskNumber) }}
      {% endif %}


      {% if directionsQuestionnaireSection %}
        {% set taskNumber = taskNumber + 1 %}
        {{ taskList(directionsQuestionnaireSection, taskNumber) }}
      {% endif %}

      {% if submitSection %}
        {% set taskNumber = taskNumber + 1 %}
        {{ taskList(submitSection, taskNumber) }}
      {% endif %}

    </div>

    <div class="column-one-third">
      <div class="meta-data">
        <ul class="font-xsmall list">
          <li>
            <strong class="bold">{{ t('Response deadline:') }}</strong>
            <div>
              {{ t('{{ responseDeadline }} at 4pm', { responseDeadline: claim.responseDeadline | date }) }}
            </div>
            <div>{{ timeRemaining(claim.remainingDays, isAfter4pm()) }}</div>
          </li>
          <li>
            <strong class="bold">{{ t('Claim number:') }}</strong>
            <span class="block">{{ claim.claimNumber }}</span>
          </li>
          <li>
            <strong class="bold">{{ t('Total claim amount:') }}</strong>
            <div>{{ claim.totalAmountTillToday | numeral }}</div>
          </li>
          <li>
            <strong class="bold">{{ t('Claim details:') }}</strong>
            {{ internalLink(t('View claim'), ResponsePaths.claimDetailsPage.evaluateUri({ externalId: claim.externalId })) }}
          </li>
        </ul>
      </div>
    </div>
  </div>

{% endblock %}
{% block contactForHelp %}{% endblock %}
